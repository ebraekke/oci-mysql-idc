{
  "version": 4,
  "terraform_version": "0.12.21",
  "serial": 1039,
  "lineage": "f9a0aa5a-943f-fd68-5835-aafc01a0a747",
  "outputs": {
    "mysql_innodb_cluster_ips": {
      "value": [
        "10.0.0.3",
        null,
        null
      ],
      "type": [
        "tuple",
        [
          "string",
          "string",
          "string"
        ]
      ]
    },
    "mysql_shell_private_ip": {
      "value": "10.0.0.2",
      "type": "string"
    },
    "mysql_shell_public_ip": {
      "value": "130.61.253.238",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "oci_identity_availability_domains",
      "name": "ad",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_domains": [
              {
                "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaubk6bbrsym5tbytnrlxlciu2fdmt4ifcdmafhbcu2pvjcpn4fsla",
                "id": "ocid1.availabilitydomain.oc1..aaaaaaaalcdcbl7u6akbmkojxhrozpj2v7yavqqydkj3ytyjbt47lnoqnm2q",
                "name": "ZmTj:EU-FRANKFURT-1-AD-1"
              },
              {
                "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaubk6bbrsym5tbytnrlxlciu2fdmt4ifcdmafhbcu2pvjcpn4fsla",
                "id": "ocid1.availabilitydomain.oc1..aaaaaaaaiifj24st3w4j7cowuo3pmqcuqwjapjv435vtjmgh5j7q3flguwna",
                "name": "ZmTj:EU-FRANKFURT-1-AD-2"
              },
              {
                "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaubk6bbrsym5tbytnrlxlciu2fdmt4ifcdmafhbcu2pvjcpn4fsla",
                "id": "ocid1.availabilitydomain.oc1..aaaaaaaaa2artt5wizbqvwl3rgptylx2l7jqbnyv4dygcfvlrd3dphvi3mdq",
                "name": "ZmTj:EU-FRANKFURT-1-AD-3"
              }
            ],
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaubk6bbrsym5tbytnrlxlciu2fdmt4ifcdmafhbcu2pvjcpn4fsla",
            "filter": null,
            "id": "2020-02-26 14:36:38.25642725 +0000 UTC"
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "template_file",
      "name": "ad_names",
      "each": "list",
      "provider": "provider.template",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "805bfd9596c98ae134c716df841c94e396280ebeacff3eddf0405bb16f744ee9",
            "rendered": "ZmTj:EU-FRANKFURT-1-AD-1",
            "template": "ZmTj:EU-FRANKFURT-1-AD-1",
            "vars": null
          }
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "1e47f6897b016b63a3f7c206b41d9c9dae53ce0b3e855e7f7977dfedde14e981",
            "rendered": "ZmTj:EU-FRANKFURT-1-AD-2",
            "template": "ZmTj:EU-FRANKFURT-1-AD-2",
            "vars": null
          }
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "a8f26d11b2ff98fad6bf2fd22528994ab7482475c9dabbc8767bd70ac1662e9f",
            "rendered": "ZmTj:EU-FRANKFURT-1-AD-3",
            "template": "ZmTj:EU-FRANKFURT-1-AD-3",
            "vars": null
          }
        }
      ]
    },
    {
      "module": "module.mysql-innodb-cluster",
      "mode": "data",
      "type": "template_file",
      "name": "install_cluster",
      "provider": "provider.template",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "a51e05d67632d700b20c817d492fd7891e3503e1707db2de41ba555000821325",
            "rendered": "#!/bin/bash\n# Configure Instance, create cluster, add instances...\n\n# Install MySQL Community Edition 8.0.18\necho \"Configuring MySQL Instance...\"\nwhile true\ndo\n  systemctl status mysqld \u003e/dev/null 2\u003e\u00261\n  if [[ $? -eq 0 ]]\n  then\n     echo \"mysqld is running...\"\n     break\n  fi\n  echo \"Waiting 10 seconds....\"\n  sleep 10\ndone\ninstance_ip=$(ip ad sh | grep ^2: -A 2 | grep inet | awk '{ print $2 }' | cut -d'/' -f1)\nmysqlsh  -- dba configureInstance clusteradmin:fred@$instance_ip --interactive=false --restart=true\n\n# SELinux\nsemanage port -a -t mysqld_port_t -p tcp 30000-50000\n\nwhile true\ndo\n  systemctl status mysqld \u003e/dev/null 2\u003e\u00261\n  if [[ $? -eq 0 ]]\n  then\n     echo \"mysqld is running...\"\n     break\n  fi\n  echo \"Waiting 10 seconds....\"\n  sleep 10\ndone\nhostname=$(hostname -s)\nme=${hostname: -1}\nif [[ $me -eq 1 ]]\nthen\n  echo \"We are the primary node\"\n  mysqlsh  clusteradmin:fred@$instance_ip -- dba create-cluster \"MyClusterInOCI\" --localAddress=$instance_ip --autoRejoinTries=3\n  echo \"MySQL InnoDB Cluster created successfully!\"\n  primary_ip=$instance_ip\nelse\n  echo \"We are a secondary node\"\n  # finding ip of primary node\n  primary_host=\"${hostname%?}1\"\n  primary_ip=$(ping -c1 -q $primary_host | grep PING | awk -F '[()]' '{print $2}')\n  #ip_nb=${instance_ip##*.}\n  #ip_nb=$(expr $ip_nb - $me + 1)\n  #primary_ip=\"${instance_ip%.*}.$ip_nb\"\n  \n  # check is primary is available\n  while true\n  do\n    mysqlsh clusteradmin:fred@$primary_ip --sql -e \"select * from performance_schema.replication_group_members where member_host='$primary_ip'\" | grep PRIMARY\n    if [[ $? -eq 0 ]]\n    then\n       echo \"Primary is running and reachable...\"\n       break\n    fi\n    echo \"Waiting 10 seconds then trying again to connect to Primary instance....\"\n    sleep 10\n  done\n  mysqlsh clusteradmin:fred@$primary_ip -- cluster add-instance \"clusteradmin:fred@$instance_ip:3306\" --localAddress=$instance_ip --recoveryMethod=clone --autoRejoinTries=3 --waitRecovery=1\n  sleep 10\n  echo \"MySQL InnoDB Cluster instance added successfully!\"\nfi   \n# set the name\necho \"Set the instance name to $hostname\"\nmysqlsh clusteradmin:fred@$primary_ip -- cluster set-instance-option \"clusteradmin@$instance_ip:3306\" 'label' \"$hostname\"\n\necho \"All set for this instance !\"\n",
            "template": "#!/bin/bash\n# Configure Instance, create cluster, add instances...\n\n# Install MySQL Community Edition 8.0.18\necho \"Configuring MySQL Instance...\"\nwhile true\ndo\n  systemctl status mysqld \u003e/dev/null 2\u003e\u00261\n  if [[ $? -eq 0 ]]\n  then\n     echo \"mysqld is running...\"\n     break\n  fi\n  echo \"Waiting 10 seconds....\"\n  sleep 10\ndone\ninstance_ip=$(ip ad sh | grep ^2: -A 2 | grep inet | awk '{ print $2 }' | cut -d'/' -f1)\nmysqlsh  -- dba configureInstance clusteradmin:${clusteradmin_password}@$instance_ip --interactive=false --restart=true\n\n# SELinux\nsemanage port -a -t mysqld_port_t -p tcp 30000-50000\n\nwhile true\ndo\n  systemctl status mysqld \u003e/dev/null 2\u003e\u00261\n  if [[ $? -eq 0 ]]\n  then\n     echo \"mysqld is running...\"\n     break\n  fi\n  echo \"Waiting 10 seconds....\"\n  sleep 10\ndone\nhostname=$(hostname -s)\nme=$${hostname: -1}\nif [[ $me -eq 1 ]]\nthen\n  echo \"We are the primary node\"\n  mysqlsh  clusteradmin:${clusteradmin_password}@$instance_ip -- dba create-cluster \"${cluster_name}\" --localAddress=$instance_ip --autoRejoinTries=3\n  echo \"MySQL InnoDB Cluster created successfully!\"\n  primary_ip=$instance_ip\nelse\n  echo \"We are a secondary node\"\n  # finding ip of primary node\n  primary_host=\"$${hostname%?}1\"\n  primary_ip=$(ping -c1 -q $primary_host | grep PING | awk -F '[()]' '{print $2}')\n  #ip_nb=$${instance_ip##*.}\n  #ip_nb=$(expr $ip_nb - $me + 1)\n  #primary_ip=\"$${instance_ip%.*}.$ip_nb\"\n  \n  # check is primary is available\n  while true\n  do\n    mysqlsh clusteradmin:${clusteradmin_password}@$primary_ip --sql -e \"select * from performance_schema.replication_group_members where member_host='$primary_ip'\" | grep PRIMARY\n    if [[ $? -eq 0 ]]\n    then\n       echo \"Primary is running and reachable...\"\n       break\n    fi\n    echo \"Waiting 10 seconds then trying again to connect to Primary instance....\"\n    sleep 10\n  done\n  mysqlsh clusteradmin:${clusteradmin_password}@$primary_ip -- cluster add-instance \"clusteradmin:${clusteradmin_password}@$instance_ip:3306\" --localAddress=$instance_ip --recoveryMethod=clone --autoRejoinTries=3 --waitRecovery=1\n  sleep 10\n  echo \"MySQL InnoDB Cluster instance added successfully!\"\nfi   \n# set the name\necho \"Set the instance name to $hostname\"\nmysqlsh clusteradmin:${clusteradmin_password}@$primary_ip -- cluster set-instance-option \"clusteradmin@$instance_ip:3306\" 'label' \"$hostname\"\n\necho \"All set for this instance !\"\n",
            "vars": {
              "bastion_ip": "130.61.253.238",
              "cluster_name": "MyClusterInOCI",
              "clusteradmin_password": "fred",
              "mysql_version": "8.0.19"
            }
          }
        }
      ]
    },
    {
      "module": "module.mysql-innodb-cluster",
      "mode": "data",
      "type": "template_file",
      "name": "install_mysql",
      "provider": "provider.template",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "efd343e06e5896f8d9b78d5516ab38f6ad56bedd125e85b9ec9480242b286c3d",
            "rendered": "#!/bin/bash\n\n#set -e -x\n\n\n# Install MySQL Community Edition 8.0.18\nrpm -ivh https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm\nyum install -y mysql-community-server-8.0.19 mysql-shell-8.0.19 mysql-community-router-8.0.19\nrm -rf /var/lib/mysql/*\nmysqld --initialize-insecure -u mysql --datadir /var/lib/mysql\nsystemctl start mysqld\nmysql -e \"create user 'clusteradmin'@'%' identified by 'fred'; grant all privileges on *.* to 'clusteradmin'@'%' with grant option; reset master;\"\n#set the report_host address\ninstance_ip=$(ip ad sh | grep ^2: -A 2 | grep inet | awk '{ print $2 }' | cut -d'/' -f1)\nmysql -e \"set persist_only report_host='$instance_ip'; restart\"\n\nfirewall-cmd --zone=public --permanent --add-port=3306/tcp\nfirewall-cmd --zone=public --permanent --add-port=33060/tcp\nfirewall-cmd --zone=public --permanent --add-port=33061/tcp\nfirewall-cmd --reload\n\necho \"MySQL Server installed successfully!\"\n",
            "template": "#!/bin/bash\n\n#set -e -x\n\n\n# Install MySQL Community Edition 8.0.18\nrpm -ivh https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm\nyum install -y mysql-community-server-${mysql_version} mysql-shell-${mysql_version} mysql-community-router-${mysql_version}\nrm -rf /var/lib/mysql/*\nmysqld --initialize-insecure -u mysql --datadir /var/lib/mysql\nsystemctl start mysqld\nmysql -e \"create user 'clusteradmin'@'%' identified by '${clusteradmin_password}'; grant all privileges on *.* to 'clusteradmin'@'%' with grant option; reset master;\"\n#set the report_host address\ninstance_ip=$(ip ad sh | grep ^2: -A 2 | grep inet | awk '{ print $2 }' | cut -d'/' -f1)\nmysql -e \"set persist_only report_host='$instance_ip'; restart\"\n\nfirewall-cmd --zone=public --permanent --add-port=3306/tcp\nfirewall-cmd --zone=public --permanent --add-port=33060/tcp\nfirewall-cmd --zone=public --permanent --add-port=33061/tcp\nfirewall-cmd --reload\n\necho \"MySQL Server installed successfully!\"\n",
            "vars": {
              "bastion_ip": "130.61.253.238",
              "cluster_name": "MyClusterInOCI",
              "clusteradmin_password": "fred",
              "mysql_version": "8.0.19"
            }
          }
        }
      ]
    },
    {
      "module": "module.mysql-router",
      "mode": "data",
      "type": "template_file",
      "name": "install_router",
      "provider": "provider.template",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "55b3f6f1bc41439c57cbffd3119174d9a6d344ed68591f321f823f034436c228",
            "rendered": "#!/bin/bash\n#set -x\n\nrpm -ivh https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm\nyum install -y mysql-router-community-8.0.19 \n\necho \"MySQL Router installed successfully!\"\n\nmysqlrouter --bootstrap clusteradmin:fred@10.0.0.3:3306 --conf-use-gr-notifications --user mysqlrouter --force\n\necho \"MySQL Router bootstrapped successfully!\"\n\nfirewall-cmd --zone=public --add-port=6446/tcp --permanent\nfirewall-cmd --zone=public --add-port=6447/tcp --permanent\nfirewall-cmd --zone=public --add-port=64460/tcp --permanent\nfirewall-cmd --zone=public --add-port=64470/tcp --permanent\nfirewall-cmd --reload\n\necho \"Local Firewall updated\"\n\nsystemctl start mysqlrouter \u003e/dev/null 2\u003e\u00261\nif [[ $? -eq 0 ]]\nthen\n    echo \"MySQL Router is running...\"\nfi\n",
            "template": "#!/bin/bash\n#set -x\n\nrpm -ivh https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm\nyum install -y mysql-router-community-${mysql_version} \n\necho \"MySQL Router installed successfully!\"\n\nmysqlrouter --bootstrap clusteradmin:${clusteradmin_password}@${primary_ip}:3306 --conf-use-gr-notifications --user mysqlrouter --force\n\necho \"MySQL Router bootstrapped successfully!\"\n\nfirewall-cmd --zone=public --add-port=6446/tcp --permanent\nfirewall-cmd --zone=public --add-port=6447/tcp --permanent\nfirewall-cmd --zone=public --add-port=64460/tcp --permanent\nfirewall-cmd --zone=public --add-port=64470/tcp --permanent\nfirewall-cmd --reload\n\necho \"Local Firewall updated\"\n\nsystemctl start mysqlrouter \u003e/dev/null 2\u003e\u00261\nif [[ $? -eq 0 ]]\nthen\n    echo \"MySQL Router is running...\"\nfi\n",
            "vars": {
              "clusteradmin_password": "fred",
              "mysql_version": "8.0.19",
              "primary_ip": "10.0.0.3",
              "user": "opc"
            }
          }
        }
      ]
    },
    {
      "module": "module.mysql-shell",
      "mode": "data",
      "type": "template_file",
      "name": "install_shell",
      "provider": "provider.template",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "6a6bd63a2e48c3d980bc0cbfc7a32197f6c60b44f7f8a66f6622973aa157912c",
            "rendered": "#!/bin/bash\n#set -x\n\n# Install Mysql\n## Using the MySQL Yum repository to install the latest versions of MySQL 8.0\n## Install Latest version： https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm\n##sudo wget -O /etc/yum.repos.d/mysql.rpm https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm\n##cd /etc/yum.repos.d\n##sudo rpm -Uvh mysql.rpm\n##sudo yum install -y mysql-community-server\n\n# Install MySQL Community Edition 8.0.18\nrpm -ivh https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm\nyum install -y mysql-shell-8.0.19 \nmkdir ~opc/.mysqlsh\ncp /usr/share/mysqlsh/prompt/prompt_256pl+aw.json ~opc/.mysqlsh/prompt.json\necho '{\n    \"history.autoSave\": \"true\",\n    \"history.maxSize\": \"5000\"\n}' \u003e ~opc/.mysqlsh/options.json\nchown -R opc ~opc/.mysqlsh\n\necho \"MySQL Shell successfully!\"\n",
            "template": "#!/bin/bash\n#set -x\n\n# Install Mysql\n## Using the MySQL Yum repository to install the latest versions of MySQL 8.0\n## Install Latest version： https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm\n##sudo wget -O /etc/yum.repos.d/mysql.rpm https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm\n##cd /etc/yum.repos.d\n##sudo rpm -Uvh mysql.rpm\n##sudo yum install -y mysql-community-server\n\n# Install MySQL Community Edition 8.0.18\nrpm -ivh https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm\nyum install -y mysql-shell-${mysql_version} \nmkdir ~${user}/.mysqlsh\ncp /usr/share/mysqlsh/prompt/prompt_256pl+aw.json ~${user}/.mysqlsh/prompt.json\necho '{\n    \"history.autoSave\": \"true\",\n    \"history.maxSize\": \"5000\"\n}' \u003e ~${user}/.mysqlsh/options.json\nchown -R ${user} ~${user}/.mysqlsh\n\necho \"MySQL Shell successfully!\"\n",
            "vars": {
              "mysql_version": "8.0.19",
              "user": "opc"
            }
          }
        }
      ]
    },
    {
      "module": "module.mysql-router",
      "mode": "managed",
      "type": "null_resource",
      "name": "TFMysqlRouter",
      "provider": "provider.null",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "8235417706813520388",
            "triggers": null
          },
          "dependencies": [
            "module.mysql-innodb-cluster.oci_core_instance.TFMysqlInnoDBCluterNode",
            "module.mysql-shell.oci_core_instance.TFMysqlShell",
            "oci_core_internet_gateway.internet_gateway",
            "oci_core_route_table.public_route_table",
            "oci_core_security_list.private_security_list",
            "oci_core_security_list.public_security_list",
            "oci_core_subnet.public",
            "oci_core_virtual_network.mysqlvcn"
          ]
        }
      ]
    },
    {
      "module": "module.mysql-innodb-cluster",
      "mode": "managed",
      "type": "oci_core_instance",
      "name": "TFMysqlInnoDBCluterNode",
      "each": "list",
      "provider": "provider.oci",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "agent_config": [
              {
                "is_management_disabled": false,
                "is_monitoring_disabled": false
              }
            ],
            "availability_domain": "ZmTj:EU-FRANKFURT-1-AD-1",
            "boot_volume_id": "ocid1.bootvolume.oc1.eu-frankfurt-1.abtheljt5nsqqgt2yf32jlevfd6gkf3o43sh7jdmxosvflerysckuchai4wa",
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaubk6bbrsym5tbytnrlxlciu2fdmt4ifcdmafhbcu2pvjcpn4fsla",
            "create_vnic_details": [
              {
                "assign_public_ip": "true",
                "defined_tags": {},
                "display_name": "MySQLInnoDBClusterNode1",
                "freeform_tags": {},
                "hostname_label": "mysqlinnodbclusternode1",
                "nsg_ids": [],
                "private_ip": "10.0.0.3",
                "skip_source_dest_check": false,
                "subnet_id": "ocid1.subnet.oc1.eu-frankfurt-1.aaaaaaaauy6s3r3jzqbic35et53beov7pqcvd5aaxsj37wtdqnuboplg3q5q"
              }
            ],
            "dedicated_vm_host_id": null,
            "defined_tags": {},
            "display_name": "MySQLInnoDBClusterNode1",
            "extended_metadata": {},
            "fault_domain": "FAULT-DOMAIN-1",
            "freeform_tags": {},
            "hostname_label": "mysqlinnodbclusternode1",
            "id": "ocid1.instance.oc1.eu-frankfurt-1.antheljtbinntbycb7iycv7jzbsdzyjp24yvlijpaurrtiq75iwq4e2ho6zq",
            "image": "ocid1.image.oc1.eu-frankfurt-1.aaaaaaaa4cmgko5la45jui5cuju7byv6dgnfnjbxhwqxaei3q4zjwlliptuq",
            "ipxe_script": null,
            "is_pv_encryption_in_transit_enabled": null,
            "launch_mode": "PARAVIRTUALIZED",
            "launch_options": [
              {
                "boot_volume_type": "PARAVIRTUALIZED",
                "firmware": "UEFI_64",
                "is_consistent_volume_naming_enabled": true,
                "is_pv_encryption_in_transit_enabled": false,
                "network_type": "PARAVIRTUALIZED",
                "remote_data_volume_type": "PARAVIRTUALIZED"
              }
            ],
            "metadata": {
              "ssh_authorized_keys": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDcp3FypROs4KEMpgLF3x4UgtXTLDhBtRF6wYj6D023eTiyP0njLv7xy4z0pzLdkpBOJA8GUvJ4Kaw1aQRA3K21q83D8UOw7CBtA7sL162wGZKKjlWCeMd7IZVPfgkG5Zyj/n/sq3kpw35dqCXS8Bc3UwY7cQk9bRaNHJr3SVoYMg8PYModzVe/G6c25rXY5hJjVbSnSk+BGHxJnUjrE9fyWZCeOqoY5JZz6wWOOUW+DF1SZa0JF66uMHJkary2N03afKOiSd0Sir1WS5bA6SxnEl1n758boIHusna83Z4b8Kw+vYKKz9mmJBPCxVufanOfUgfIk5iNy9chrlg8fZxQkTdFzImBnegJJipG6IrgyqC0f7pEkGNiCwKERuCi+PAIlFDk9FvoHQTv0dFq1zGc51hSslgWDA48JzCR+rq8Hls88hDyuBvQCsbL5mlmpi55wPCQPOxRXlwlPLhA6c5ysltJ+/tI/TbpR+48M3lbIAyz+/zCf3WOCRdPyvKOKS8= fred@letoshiba\n"
            },
            "preserve_boot_volume": null,
            "private_ip": "10.0.0.3",
            "public_ip": "130.61.243.123",
            "region": "eu-frankfurt-1",
            "shape": "VM.Standard.E2.1.Micro",
            "source_details": [
              {
                "boot_volume_size_in_gbs": "47",
                "kms_key_id": "",
                "source_id": "ocid1.image.oc1.eu-frankfurt-1.aaaaaaaa4cmgko5la45jui5cuju7byv6dgnfnjbxhwqxaei3q4zjwlliptuq",
                "source_type": "image"
              }
            ],
            "state": "RUNNING",
            "subnet_id": "ocid1.subnet.oc1.eu-frankfurt-1.aaaaaaaauy6s3r3jzqbic35et53beov7pqcvd5aaxsj37wtdqnuboplg3q5q",
            "system_tags": {
              "orcl-cloud.free-tier-retained": "true"
            },
            "time_created": "2020-02-26 14:24:51.527 +0000 UTC",
            "time_maintenance_reboot_due": "",
            "timeouts": {
              "create": "10m",
              "delete": null,
              "update": null
            }
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NzIwMDAwMDAwMDAwMCwidXBkYXRlIjo3MjAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.mysql-shell.oci_core_instance.TFMysqlShell",
            "oci_core_internet_gateway.internet_gateway",
            "oci_core_route_table.public_route_table",
            "oci_core_security_list.private_security_list",
            "oci_core_security_list.public_security_list",
            "oci_core_subnet.public",
            "oci_core_virtual_network.mysqlvcn"
          ]
        }
      ]
    },
    {
      "module": "module.mysql-shell",
      "mode": "managed",
      "type": "oci_core_instance",
      "name": "TFMysqlShell",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "agent_config": [
              {
                "is_management_disabled": false,
                "is_monitoring_disabled": false
              }
            ],
            "availability_domain": "ZmTj:EU-FRANKFURT-1-AD-1",
            "boot_volume_id": "ocid1.bootvolume.oc1.eu-frankfurt-1.abtheljtei6z7cfc4iaytxley22ibq5xdg5oqilte3nc4vsj5lzzus7yu7yq",
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaubk6bbrsym5tbytnrlxlciu2fdmt4ifcdmafhbcu2pvjcpn4fsla",
            "create_vnic_details": [
              {
                "assign_public_ip": "true",
                "defined_tags": {},
                "display_name": "MySQLShellBastion",
                "freeform_tags": {},
                "hostname_label": "mysqlshellbastion",
                "nsg_ids": [],
                "private_ip": "10.0.0.2",
                "skip_source_dest_check": false,
                "subnet_id": "ocid1.subnet.oc1.eu-frankfurt-1.aaaaaaaauy6s3r3jzqbic35et53beov7pqcvd5aaxsj37wtdqnuboplg3q5q"
              }
            ],
            "dedicated_vm_host_id": null,
            "defined_tags": {},
            "display_name": "MySQLShellBastion",
            "extended_metadata": {},
            "fault_domain": "FAULT-DOMAIN-1",
            "freeform_tags": {},
            "hostname_label": "mysqlshellbastion",
            "id": "ocid1.instance.oc1.eu-frankfurt-1.antheljtbinntbycci7jterbb332zvdd36ozjjzze5mas726abofztbbsg7q",
            "image": "ocid1.image.oc1.eu-frankfurt-1.aaaaaaaa4cmgko5la45jui5cuju7byv6dgnfnjbxhwqxaei3q4zjwlliptuq",
            "ipxe_script": null,
            "is_pv_encryption_in_transit_enabled": null,
            "launch_mode": "PARAVIRTUALIZED",
            "launch_options": [
              {
                "boot_volume_type": "PARAVIRTUALIZED",
                "firmware": "UEFI_64",
                "is_consistent_volume_naming_enabled": true,
                "is_pv_encryption_in_transit_enabled": false,
                "network_type": "PARAVIRTUALIZED",
                "remote_data_volume_type": "PARAVIRTUALIZED"
              }
            ],
            "metadata": {
              "ssh_authorized_keys": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCWDfCdMoCKFIFgZ4K1ca94Mv0UpT8ewXAdT+3dqNU0koWcU5QbEtA1jEGq8ZyNCFB4HnhYvN3WXn5hJffVryOLeXuJoxFE85JspV5SMopEhcijgjl36v68NQxEwH/JhFfENW0mu/Wef+ORuoqifFoId85MuhBNPIJNW0zHpOGEJrYb86u0RFikP3sREhora794r6BS0FOS1qZkIZCD5j91NSSu+8mG6aIiKwETQIfoRb8lZtfYWHaJtjLWIcZIiwp99ewGUQpmn1Vw5sfhnyOeqGh3WQO8NbMgVjvDYAacFb+Fuu48+krZhJKRayRnS18FpRfQtXMn7N4myV6/YDtE8uHCfgMNfvfvWtD5VlUS5ROaOGBSwkMh9qhe1ttnDt28AaMQsD1o+Pavf8wNm4oH6U4NajDdsdD5JYcVY43luKPz8O6SffhGNi+uRx3qiWEIavcXGQAvzLM/TMmJdxvdHy6SsR5CsF9FBybwoG2qs4R+tBEzDrTTgkHJ+Tmt/g8= fred@letoshiba\n"
            },
            "preserve_boot_volume": null,
            "private_ip": "10.0.0.2",
            "public_ip": "130.61.253.238",
            "region": "eu-frankfurt-1",
            "shape": "VM.Standard.E2.1.Micro",
            "source_details": [
              {
                "boot_volume_size_in_gbs": "47",
                "kms_key_id": "",
                "source_id": "ocid1.image.oc1.eu-frankfurt-1.aaaaaaaa4cmgko5la45jui5cuju7byv6dgnfnjbxhwqxaei3q4zjwlliptuq",
                "source_type": "image"
              }
            ],
            "state": "RUNNING",
            "subnet_id": "ocid1.subnet.oc1.eu-frankfurt-1.aaaaaaaauy6s3r3jzqbic35et53beov7pqcvd5aaxsj37wtdqnuboplg3q5q",
            "system_tags": {
              "orcl-cloud.free-tier-retained": "true"
            },
            "time_created": "2020-02-26 14:22:08.662 +0000 UTC",
            "time_maintenance_reboot_due": "",
            "timeouts": {
              "create": "10m",
              "delete": null,
              "update": null
            }
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NzIwMDAwMDAwMDAwMCwidXBkYXRlIjo3MjAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "oci_core_internet_gateway.internet_gateway",
            "oci_core_route_table.public_route_table",
            "oci_core_security_list.private_security_list",
            "oci_core_security_list.public_security_list",
            "oci_core_subnet.public",
            "oci_core_virtual_network.mysqlvcn"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_internet_gateway",
      "name": "internet_gateway",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaubk6bbrsym5tbytnrlxlciu2fdmt4ifcdmafhbcu2pvjcpn4fsla",
            "defined_tags": {},
            "display_name": "internet_gateway",
            "enabled": true,
            "freeform_tags": {},
            "id": "ocid1.internetgateway.oc1.eu-frankfurt-1.aaaaaaaan4z2igvn72n6eaobo2ifhns5gqpkz5dr5kerp37yfh4uk5dik6cq",
            "state": "AVAILABLE",
            "time_created": "2020-02-26 14:22:06.104 +0000 UTC",
            "timeouts": null,
            "vcn_id": "ocid1.vcn.oc1.eu-frankfurt-1.amaaaaaabinntbyaasjircwo22gezrolngudamme4njxbmfbf26jz5yjz3za"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo5MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjkwMDAwMDAwMDAwMH19",
          "dependencies": [
            "oci_core_virtual_network.mysqlvcn"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_route_table",
      "name": "public_route_table",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaubk6bbrsym5tbytnrlxlciu2fdmt4ifcdmafhbcu2pvjcpn4fsla",
            "defined_tags": {},
            "display_name": "RouteTableForMySQLPublic",
            "freeform_tags": {},
            "id": "ocid1.routetable.oc1.eu-frankfurt-1.aaaaaaaaxxgfsn2q5yceg3ct7jx2hksd2s2hsedwadjmeuyxhm4jy4jkcqta",
            "route_rules": [
              {
                "cidr_block": "0.0.0.0/0",
                "destination": "0.0.0.0/0",
                "destination_type": "CIDR_BLOCK",
                "network_entity_id": "ocid1.internetgateway.oc1.eu-frankfurt-1.aaaaaaaan4z2igvn72n6eaobo2ifhns5gqpkz5dr5kerp37yfh4uk5dik6cq"
              }
            ],
            "state": "AVAILABLE",
            "time_created": "2020-02-26 14:22:06.558 +0000 UTC",
            "timeouts": null,
            "vcn_id": "ocid1.vcn.oc1.eu-frankfurt-1.amaaaaaabinntbyaasjircwo22gezrolngudamme4njxbmfbf26jz5yjz3za"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo5MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjkwMDAwMDAwMDAwMH19",
          "dependencies": [
            "oci_core_internet_gateway.internet_gateway",
            "oci_core_virtual_network.mysqlvcn"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_security_list",
      "name": "private_security_list",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaubk6bbrsym5tbytnrlxlciu2fdmt4ifcdmafhbcu2pvjcpn4fsla",
            "defined_tags": {},
            "display_name": "Private",
            "egress_security_rules": [
              {
                "destination": "10.0.0.0/16",
                "destination_type": "CIDR_BLOCK",
                "icmp_options": [],
                "protocol": "all",
                "stateless": false,
                "tcp_options": [],
                "udp_options": []
              }
            ],
            "freeform_tags": {},
            "id": "ocid1.securitylist.oc1.eu-frankfurt-1.aaaaaaaa2fqjvfzymjizd4vwd6xerdb5y6lztee4ruqpgldyn5fquzg7agzq",
            "ingress_security_rules": [
              {
                "icmp_options": [],
                "protocol": "1",
                "source": "10.0.0.0/16",
                "source_type": "CIDR_BLOCK",
                "stateless": false,
                "tcp_options": [],
                "udp_options": []
              },
              {
                "icmp_options": [],
                "protocol": "6",
                "source": "10.0.0.0/16",
                "source_type": "CIDR_BLOCK",
                "stateless": false,
                "tcp_options": [
                  {
                    "max": 22,
                    "min": 22,
                    "source_port_range": []
                  }
                ],
                "udp_options": []
              },
              {
                "icmp_options": [],
                "protocol": "6",
                "source": "10.0.0.0/16",
                "source_type": "CIDR_BLOCK",
                "stateless": false,
                "tcp_options": [
                  {
                    "max": 33061,
                    "min": 33060,
                    "source_port_range": []
                  }
                ],
                "udp_options": []
              },
              {
                "icmp_options": [],
                "protocol": "6",
                "source": "10.0.0.0/16",
                "source_type": "CIDR_BLOCK",
                "stateless": false,
                "tcp_options": [
                  {
                    "max": 3306,
                    "min": 3306,
                    "source_port_range": []
                  }
                ],
                "udp_options": []
              }
            ],
            "state": "AVAILABLE",
            "time_created": "2020-02-26 14:22:06.198 +0000 UTC",
            "timeouts": null,
            "vcn_id": "ocid1.vcn.oc1.eu-frankfurt-1.amaaaaaabinntbyaasjircwo22gezrolngudamme4njxbmfbf26jz5yjz3za"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo5MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjkwMDAwMDAwMDAwMH19",
          "dependencies": [
            "oci_core_virtual_network.mysqlvcn"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_security_list",
      "name": "public_router_security_list",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaubk6bbrsym5tbytnrlxlciu2fdmt4ifcdmafhbcu2pvjcpn4fsla",
            "defined_tags": {},
            "display_name": "Allow Public Connections to Router --warning--",
            "egress_security_rules": [
              {
                "destination": "0.0.0.0/0",
                "destination_type": "CIDR_BLOCK",
                "icmp_options": [],
                "protocol": "6",
                "stateless": false,
                "tcp_options": [],
                "udp_options": []
              }
            ],
            "freeform_tags": {},
            "id": "ocid1.securitylist.oc1.eu-frankfurt-1.aaaaaaaap3sqp5xifuxwizhnjd7qojet7yejc7yzgqlsndgijyazcjm4ldna",
            "ingress_security_rules": [
              {
                "icmp_options": [],
                "protocol": "6",
                "source": "0.0.0.0/0",
                "source_type": "CIDR_BLOCK",
                "stateless": false,
                "tcp_options": [
                  {
                    "max": 64460,
                    "min": 64460,
                    "source_port_range": []
                  }
                ],
                "udp_options": []
              },
              {
                "icmp_options": [],
                "protocol": "6",
                "source": "0.0.0.0/0",
                "source_type": "CIDR_BLOCK",
                "stateless": false,
                "tcp_options": [
                  {
                    "max": 64470,
                    "min": 64470,
                    "source_port_range": []
                  }
                ],
                "udp_options": []
              },
              {
                "icmp_options": [],
                "protocol": "6",
                "source": "0.0.0.0/0",
                "source_type": "CIDR_BLOCK",
                "stateless": false,
                "tcp_options": [
                  {
                    "max": 6447,
                    "min": 6446,
                    "source_port_range": []
                  }
                ],
                "udp_options": []
              }
            ],
            "state": "AVAILABLE",
            "time_created": "2020-02-26 14:22:06.215 +0000 UTC",
            "timeouts": null,
            "vcn_id": "ocid1.vcn.oc1.eu-frankfurt-1.amaaaaaabinntbyaasjircwo22gezrolngudamme4njxbmfbf26jz5yjz3za"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo5MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjkwMDAwMDAwMDAwMH19",
          "dependencies": [
            "oci_core_virtual_network.mysqlvcn"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_security_list",
      "name": "public_security_list",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaubk6bbrsym5tbytnrlxlciu2fdmt4ifcdmafhbcu2pvjcpn4fsla",
            "defined_tags": {},
            "display_name": "Allow Public SSH Connections to Bastion",
            "egress_security_rules": [
              {
                "destination": "0.0.0.0/0",
                "destination_type": "CIDR_BLOCK",
                "icmp_options": [],
                "protocol": "6",
                "stateless": false,
                "tcp_options": [],
                "udp_options": []
              }
            ],
            "freeform_tags": {},
            "id": "ocid1.securitylist.oc1.eu-frankfurt-1.aaaaaaaa6nhpfhclo27mtjrhocufvbpfqv5cr4igzqvpto2ukofpyalsdrna",
            "ingress_security_rules": [
              {
                "icmp_options": [],
                "protocol": "6",
                "source": "0.0.0.0/0",
                "source_type": "CIDR_BLOCK",
                "stateless": false,
                "tcp_options": [
                  {
                    "max": 22,
                    "min": 22,
                    "source_port_range": []
                  }
                ],
                "udp_options": []
              }
            ],
            "state": "AVAILABLE",
            "time_created": "2020-02-26 14:22:06.244 +0000 UTC",
            "timeouts": null,
            "vcn_id": "ocid1.vcn.oc1.eu-frankfurt-1.amaaaaaabinntbyaasjircwo22gezrolngudamme4njxbmfbf26jz5yjz3za"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo5MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjkwMDAwMDAwMDAwMH19",
          "dependencies": [
            "oci_core_virtual_network.mysqlvcn"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_subnet",
      "name": "public",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_domain": null,
            "cidr_block": "10.0.0.0/24",
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaubk6bbrsym5tbytnrlxlciu2fdmt4ifcdmafhbcu2pvjcpn4fsla",
            "defined_tags": {},
            "dhcp_options_id": "ocid1.dhcpoptions.oc1.eu-frankfurt-1.aaaaaaaavztbpflnyqaijubtzu7rmvm52rkpoj7elfbhpxiuhvofcki7vt2a",
            "display_name": "mysql_public_subnet",
            "dns_label": "mysqlpub",
            "freeform_tags": {},
            "id": "ocid1.subnet.oc1.eu-frankfurt-1.aaaaaaaauy6s3r3jzqbic35et53beov7pqcvd5aaxsj37wtdqnuboplg3q5q",
            "ipv6cidr_block": null,
            "ipv6public_cidr_block": null,
            "ipv6virtual_router_ip": null,
            "prohibit_public_ip_on_vnic": false,
            "route_table_id": "ocid1.routetable.oc1.eu-frankfurt-1.aaaaaaaaxxgfsn2q5yceg3ct7jx2hksd2s2hsedwadjmeuyxhm4jy4jkcqta",
            "security_list_ids": [
              "ocid1.securitylist.oc1.eu-frankfurt-1.aaaaaaaa2fqjvfzymjizd4vwd6xerdb5y6lztee4ruqpgldyn5fquzg7agzq",
              "ocid1.securitylist.oc1.eu-frankfurt-1.aaaaaaaa6nhpfhclo27mtjrhocufvbpfqv5cr4igzqvpto2ukofpyalsdrna"
            ],
            "state": "AVAILABLE",
            "subnet_domain_name": "mysqlpub.mysqlvcn.oraclevcn.com",
            "time_created": "2020-02-26 14:22:07.446 +0000 UTC",
            "timeouts": null,
            "vcn_id": "ocid1.vcn.oc1.eu-frankfurt-1.amaaaaaabinntbyaasjircwo22gezrolngudamme4njxbmfbf26jz5yjz3za",
            "virtual_router_ip": "10.0.0.1",
            "virtual_router_mac": "00:00:17:6A:FE:14"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo5MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjkwMDAwMDAwMDAwMH19",
          "dependencies": [
            "oci_core_internet_gateway.internet_gateway",
            "oci_core_route_table.public_route_table",
            "oci_core_security_list.private_security_list",
            "oci_core_security_list.public_security_list",
            "oci_core_virtual_network.mysqlvcn"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_virtual_network",
      "name": "mysqlvcn",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "10.0.0.0/16",
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaubk6bbrsym5tbytnrlxlciu2fdmt4ifcdmafhbcu2pvjcpn4fsla",
            "default_dhcp_options_id": "ocid1.dhcpoptions.oc1.eu-frankfurt-1.aaaaaaaavztbpflnyqaijubtzu7rmvm52rkpoj7elfbhpxiuhvofcki7vt2a",
            "default_route_table_id": "ocid1.routetable.oc1.eu-frankfurt-1.aaaaaaaactx6i7qatoqmgqfvqk3c5k5kv6725nx3txxpi4tv4anyyqesovba",
            "default_security_list_id": "ocid1.securitylist.oc1.eu-frankfurt-1.aaaaaaaaapwl3gypfyyyvgg7r5umbnzxzg7wfucemculpius62jt2jlivi2q",
            "defined_tags": {},
            "display_name": "mysql_vcn",
            "dns_label": "mysqlvcn",
            "freeform_tags": {},
            "id": "ocid1.vcn.oc1.eu-frankfurt-1.amaaaaaabinntbyaasjircwo22gezrolngudamme4njxbmfbf26jz5yjz3za",
            "ipv6cidr_block": null,
            "ipv6public_cidr_block": null,
            "is_ipv6enabled": null,
            "state": "AVAILABLE",
            "time_created": "2020-02-26 14:22:05.708 +0000 UTC",
            "timeouts": null,
            "vcn_domain_name": "mysqlvcn.oraclevcn.com"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo5MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjkwMDAwMDAwMDAwMH19"
        }
      ]
    }
  ]
}
